# FundMe Smart Contract

M·ªôt smart contract g√¢y qu·ªπ phi t·∫≠p trung ƒë∆∞·ª£c x√¢y d·ª±ng tr√™n Ethereum cho ph√©p ng∆∞·ªùi d√πng ƒë√≥ng g√≥p ETH v√†o c√°c d·ª± √°n v√† cho ph√©p ch·ªß s·ªü h·ªØu d·ª± √°n r√∫t ti·ªÅn ƒë√£ thu ƒë∆∞·ª£c. Contract s·ª≠ d·ª•ng Chainlink price feeds ƒë·ªÉ thi·∫øt l·∫≠p s·ªë ti·ªÅn ƒë√≥ng g√≥p t·ªëi thi·ªÉu theo USD.

## üåü T√≠nh nƒÉng

- **S·ªë ti·ªÅn t·ªëi thi·ªÉu theo USD**: √Åp d·ª•ng s·ªë ti·ªÅn ƒë√≥ng g√≥p t·ªëi thi·ªÉu $5 USD s·ª≠ d·ª•ng Chainlink price feeds
- **Ch·ªâ ch·ªß s·ªü h·ªØu m·ªõi c√≥ th·ªÉ r√∫t ti·ªÅn**: Ch·ªâ c√≥ ch·ªß s·ªü h·ªØu contract m·ªõi c√≥ th·ªÉ r√∫t qu·ªπ ƒë√£ thu ƒë∆∞·ª£c
- **T·ªëi ∆∞u Gas**: S·ª≠ d·ª•ng bi·∫øn `constant`, `immutable` v√† custom errors ƒë·ªÉ t·ªëi ∆∞u gas
- **Theo d√µi ng∆∞·ªùi ƒë√≥ng g√≥p**: L∆∞u tr·ªØ h·ªì s∆° c·ªßa t·∫•t c·∫£ ng∆∞·ªùi ƒë√≥ng g√≥p v√† s·ªë ti·ªÅn c·ªßa h·ªç
- **H·ªó tr·ª£ ETH tr·ª±c ti·∫øp**: Ch·∫•p nh·∫≠n chuy·ªÉn ETH tr·ª±c ti·∫øp qua `receive()` v√† `fallback()` functions
- **Event Logging**: Ph√°t ra events ƒë·ªÉ ƒë·∫£m b·∫£o minh b·∫°ch v√† theo d√µi off-chain

## üìã Chi ti·∫øt Contract

### M·∫°ng ƒë√£ Deploy

| M·∫°ng | ƒê·ªãa ch·ªâ Contract | Price Feed |
|------|------------------|------------|
| Sepolia Testnet | `0xf5D1887381E927Fd908B3064847931E042710154` | ETH/USD |
| ZKsync Sepolia | *S·∫Øp c√≥* | ETH/USD |

### H·∫±ng s·ªë ch√≠nh

- **S·ªë ti·ªÅn ƒë√≥ng g√≥p t·ªëi thi·ªÉu**: $5 USD (t∆∞∆°ng ƒë∆∞∆°ng ETH)
- **Phi√™n b·∫£n Solidity**: ^0.8.24
- **Gi·∫•y ph√©p**: MIT

## üöÄ B·∫Øt ƒë·∫ßu nhanh

### Y√™u c·∫ßu

- V√≠ MetaMask
- Sepolia testnet ETH ([L·∫•y t·ª´ faucet](https://sepoliafaucet.com/))
- Hi·ªÉu bi·∫øt c∆° b·∫£n v·ªÅ giao d·ªãch Ethereum

### T∆∞∆°ng t√°c v·ªõi Contract

#### 1. ƒê√≥ng g√≥p cho d·ª± √°n

G·ª≠i ETH ƒë·∫øn contract (t·ªëi thi·ªÉu t∆∞∆°ng ƒë∆∞∆°ng $5 USD):

```javascript
// Qua function c·ªßa contract
await fundMe.fund({ value: ethers.utils.parseEther("0.01") })

// Qua chuy·ªÉn kho·∫£n tr·ª±c ti·∫øp (k√≠ch ho·∫°t receive function)
await wallet.sendTransaction({
    to: "0xf5D1887381E927Fd908B3064847931E042710154",
    value: ethers.utils.parseEther("0.01")
})
```

#### 2. Ki·ªÉm tra s·ªë d∆∞ Contract

```javascript
const balance = await fundMe.getBalance()
console.log(`S·ªë d∆∞ contract: ${ethers.utils.formatEther(balance)} ETH`)
```

#### 3. Xem s·ªë ti·ªÅn b·∫°n ƒë√£ ƒë√≥ng g√≥p

```javascript
const myContribution = await fundMe.getFundingAmount(yourAddress)
console.log(`B·∫°n ƒë√£ ƒë√≥ng g√≥p: ${ethers.utils.formatEther(myContribution)} ETH`)
```

## üîß C√°c Function c·ªßa Contract

### Functions c√¥ng khai

| Function | M√¥ t·∫£ | Quy·ªÅn truy c·∫≠p |
|----------|-------|----------------|
| `fund()` | ƒê√≥ng g√≥p ETH cho d·ª± √°n | M·ªçi ng∆∞·ªùi |
| `getBalance()` | L·∫•y s·ªë d∆∞ hi·ªán t·∫°i c·ªßa contract | M·ªçi ng∆∞·ªùi |
| `getPrice()` | L·∫•y gi√° ETH/USD hi·ªán t·∫°i | M·ªçi ng∆∞·ªùi |
| `getConversionRate(uint256)` | Chuy·ªÉn ƒë·ªïi ETH sang USD | M·ªçi ng∆∞·ªùi |
| `getFunder(uint256)` | L·∫•y ng∆∞·ªùi ƒë√≥ng g√≥p theo ch·ªâ s·ªë | M·ªçi ng∆∞·ªùi |
| `getFundingAmount(address)` | L·∫•y s·ªë ti·ªÅn ƒë√≥ng g√≥p theo ƒë·ªãa ch·ªâ | M·ªçi ng∆∞·ªùi |
| `getNumberOfFunders()` | L·∫•y t·ªïng s·ªë ng∆∞·ªùi ƒë√≥ng g√≥p | M·ªçi ng∆∞·ªùi |

### Functions ch·ªâ d√†nh cho Owner

| Function | M√¥ t·∫£ |
|----------|-------|
| `withdraw()` | R√∫t t·∫•t c·∫£ ti·ªÅn v√† reset d·ªØ li·ªáu ng∆∞·ªùi ƒë√≥ng g√≥p |
| `cheaperWithdraw()` | Phi√™n b·∫£n t·ªëi ∆∞u gas c·ªßa withdraw |

### Functions ƒë·∫∑c bi·ªát

| Function | K√≠ch ho·∫°t | M·ª•c ƒë√≠ch |
|----------|-----------|----------|
| `receive()` | Chuy·ªÉn ETH tr·ª±c ti·∫øp (kh√¥ng c√≥ data) | T·ª± ƒë·ªông ƒë√≥ng g√≥p |
| `fallback()` | Chuy·ªÉn ETH c√≥ k√®m data | T·ª± ƒë·ªông ƒë√≥ng g√≥p |

## üí∞ V√≠ d·ª• v·ªÅ ƒë√≥ng g√≥p

### T√≠nh to√°n s·ªë ti·ªÅn ƒë√≥ng g√≥p t·ªëi thi·ªÉu

Contract y√™u c·∫ßu t·ªëi thi·ªÉu $5 USD. D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë v√≠ d·ª•:

```solidity
// N·∫øu gi√° ETH = $2000
// ETH t·ªëi thi·ªÉu c·∫ßn = $5 / $2000 = 0.0025 ETH

// N·∫øu gi√° ETH = $3000
// ETH t·ªëi thi·ªÉu c·∫ßn = $5 / $3000 = 0.00167 ETH
```

### ƒê√≥ng g√≥p qua Web3

```javascript
// S·ª≠ d·ª•ng ethers.js
const provider = new ethers.providers.Web3Provider(window.ethereum)
const signer = provider.getSigner()
const fundMe = new ethers.Contract(contractAddress, abi, signer)

// ƒê√≥ng g√≥p 0.01 ETH
const tx = await fundMe.fund({ 
    value: ethers.utils.parseEther("0.01") 
})
await tx.wait()

console.log("ƒê√≥ng g√≥p th√†nh c√¥ng!")
```

### ƒê√≥ng g√≥p qua chuy·ªÉn kho·∫£n tr·ª±c ti·∫øp

```javascript
// G·ª≠i ETH tr·ª±c ti·∫øp ƒë·∫øn ƒë·ªãa ch·ªâ contract
const tx = await signer.sendTransaction({
    to: "0xf5D1887381E927Fd908B3064847931E042710154",
    value: ethers.utils.parseEther("0.01")
})
```

## üîç X√°c minh Contract

Contract ƒë√£ ƒë∆∞·ª£c x√°c minh tr√™n Etherscan. B·∫°n c√≥ th·ªÉ:

1. **Xem m√£ ngu·ªìn**: [Link Etherscan](https://sepolia.etherscan.io/address/0xf5D1887381E927Fd908B3064847931E042710154)
2. **Read Contract**: Ki·ªÉm tra t·∫•t c·∫£ bi·∫øn v√† function c√¥ng khai
3. **Write Contract**: T∆∞∆°ng t√°c tr·ª±c ti·∫øp qua giao di·ªán Etherscan

## üìä Events

Contract ph√°t ra c√°c events sau:

```solidity
event FundingReceived(address indexed funder, uint256 amount);
event FundsWithdrawn(address indexed owner, uint256 amount);
```

### Theo d√µi Events

```javascript
// L·∫Øng nghe events ƒë√≥ng g√≥p
fundMe.on("FundingReceived", (funder, amount, event) => {
    console.log(`${funder} ƒë√£ ƒë√≥ng g√≥p ${ethers.utils.formatEther(amount)} ETH`)
})

// L·∫Øng nghe events r√∫t ti·ªÅn
fundMe.on("FundsWithdrawn", (owner, amount, event) => {
    console.log(`Owner ƒë√£ r√∫t ${ethers.utils.formatEther(amount)} ETH`)
})
```

## üõ°Ô∏è T√≠nh nƒÉng b·∫£o m·∫≠t

### Ki·ªÉm so√°t truy c·∫≠p
- **Ch·ªâ owner m·ªõi r√∫t ƒë∆∞·ª£c ti·ªÅn**: Ch·ªâ ng∆∞·ªùi deploy contract m·ªõi c√≥ th·ªÉ r√∫t ti·ªÅn
- **Custom errors**: X·ª≠ l√Ω l·ªói hi·ªáu qu·∫£ v·ªÅ gas
- **Chuy·ªÉn kho·∫£n an to√†n**: S·ª≠ d·ª•ng `call` m·ª©c th·∫•p ƒë·ªÉ chuy·ªÉn ETH an to√†n

### B·∫£o m·∫≠t Price Feed
- **T√≠ch h·ª£p Chainlink**: D·ªØ li·ªáu gi√° ƒë√°ng tin c·∫≠y, phi t·∫≠p trung
- **Chuy·ªÉn ƒë·ªïi USD t·ª± ƒë·ªông**: Minimum ƒë·ªông d·ª±a tr√™n gi√° ETH hi·ªán t·∫°i
- **X√°c minh price feed**: ƒê·∫£m b·∫£o t√≠nh to√†n v·∫πn d·ªØ li·ªáu gi√°

## üìà T·ªëi ∆∞u Gas

Contract tri·ªÉn khai nhi·ªÅu k·ªπ thu·∫≠t ti·∫øt ki·ªám gas:

| T·ªëi ∆∞u h√≥a | Gas ti·∫øt ki·ªám | Tri·ªÉn khai |
|------------|---------------|------------|
| Custom Errors | ~90% | `revert NotOwner()` vs `require()` |
| Immutable Variables | ~17,000 | `immutable i_owner` |
| Constant Variables | ~20,000 | `constant MINIMUM_USD` |
| Memory Arrays | ~2,000/v√≤ng l·∫∑p | Function `cheaperWithdraw()` |

## üß™ Ki·ªÉm th·ª≠

### Danh s√°ch ki·ªÉm th·ª≠ th·ªß c√¥ng

- [ ] ƒê√≥ng g√≥p v·ªõi s·ªë ti·ªÅn < $5 USD (ph·∫£i th·∫•t b·∫°i)
- [ ] ƒê√≥ng g√≥p v·ªõi s·ªë ti·ªÅn ‚â• $5 USD (ph·∫£i th√†nh c√¥ng)
- [ ] Chuy·ªÉn ETH tr·ª±c ti·∫øp ƒë·∫øn contract (ph·∫£i k√≠ch ho·∫°t `fund()`)
- [ ] Th·ª≠ r√∫t ti·ªÅn khi kh√¥ng ph·∫£i owner (ph·∫£i th·∫•t b·∫°i)
- [ ] Owner r√∫t ti·ªÅn (ph·∫£i th√†nh c√¥ng v√† reset funders)
- [ ] Ki·ªÉm tra ƒë·ªô ch√≠nh x√°c theo d√µi funder
- [ ] X√°c minh event emissions

### Th√¥ng tin Test Network

```
M·∫°ng: Sepolia Testnet
Chain ID: 11155111
RPC URL: https://sepolia.infura.io/v3/YOUR_KEY
Block Explorer: https://sepolia.etherscan.io/
```

## üîó T√†i nguy√™n li√™n quan

- **Chainlink Price Feeds**: [T√†i li·ªáu](https://docs.chain.link/data-feeds)
- **Sepolia Faucet**: [L·∫•y Test ETH](https://sepoliafaucet.com/)
- **Etherscan**: [Contract Explorer](https://sepolia.etherscan.io/)
- **Remix IDE**: [Solidity IDE Online](https://remix.ethereum.org/)

## üìÑ Contract ABI

<details>
<summary>Nh·∫•n ƒë·ªÉ xem ABI</summary>

```json
[
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "priceFeedAddress",
        "type": "address"
      }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "InsufficientFunding",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "NotOwner",
    "type": "error"
  },
  {
    "inputs": [],
    "name": "TransferFailed",
    "type": "error"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "funder",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "FundingReceived",
    "type": "event"
  },
  {
    "anonymous": false,
    "inputs": [
      {
        "indexed": true,
        "internalType": "address",
        "name": "owner",
        "type": "address"
      },
      {
        "indexed": false,
        "internalType": "uint256",
        "name": "amount",
        "type": "uint256"
      }
    ],
    "name": "FundsWithdrawn",
    "type": "event"
  },
  {
    "stateMutability": "payable",
    "type": "fallback"
  },
  {
    "inputs": [],
    "name": "fund",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getBalance",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "ethAmount",
        "type": "uint256"
      }
    ],
    "name": "getConversionRate",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "uint256",
        "name": "index",
        "type": "uint256"
      }
    ],
    "name": "getFunder",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      {
        "internalType": "address",
        "name": "funder",
        "type": "address"
      }
    ],
    "name": "getFundingAmount",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getNumberOfFunders",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getOwner",
    "outputs": [
      {
        "internalType": "address",
        "name": "",
        "type": "address"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "getPrice",
    "outputs": [
      {
        "internalType": "uint256",
        "name": "",
        "type": "uint256"
      }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "withdraw",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  }
]
```

</details>

## ü§ù ƒê√≥ng g√≥p

ƒê√¢y l√† m·ªôt d·ª± √°n gi√°o d·ª•c ƒë·ªÉ h·ªçc Solidity v√† ph√°t tri·ªÉn smart contract. H√£y tho·∫£i m√°i:

- B√°o c√°o bugs ho·∫∑c issues
- ƒê·ªÅ xu·∫•t c·∫£i ti·∫øn
- Fork v√† th·ª≠ nghi·ªám
- Chia s·∫ª tr·∫£i nghi·ªám h·ªçc t·∫≠p c·ªßa b·∫°n

## üìù Gi·∫•y ph√©p

D·ª± √°n n√†y ƒë∆∞·ª£c c·∫•p ph√©p theo MIT License - xem m√£ ngu·ªìn contract ƒë·ªÉ bi·∫øt chi ti·∫øt.

## ‚ö†Ô∏è Tuy√™n b·ªë mi·ªÖn tr·ª´ tr√°ch nhi·ªám

Contract n√†y ƒë∆∞·ª£c deploy tr√™n **Sepolia testnet** ch·ªâ cho m·ª•c ƒë√≠ch gi√°o d·ª•c. Kh√¥ng g·ª≠i ETH mainnet th·∫≠t ƒë·∫øn contract n√†y. Lu√¥n x√°c minh ƒë·ªãa ch·ªâ contract v√† test tr√™n testnet tr∆∞·ªõc khi s·ª≠ d·ª•ng ti·ªÅn th·∫≠t.

---

**Ch√∫c h·ªçc t·∫≠p vui v·∫ª! üéì**

N·∫øu c√≥ th·∫Øc m·∫Øc ho·∫∑c c·∫ßn h·ªó tr·ª£, h√£y li√™n h·ªá ho·∫∑c ki·ªÉm tra contract tr√™n [Sepolia Etherscan](https://sepolia.etherscan.io/address/0xf5D1887381E927Fd908B3064847931E042710154).